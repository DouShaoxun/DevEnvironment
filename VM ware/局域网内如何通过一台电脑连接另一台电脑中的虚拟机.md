# 局域网内如何通过一台电脑连接另一台电脑中的虚拟机

> 有两台电脑 A、B，B 电脑中安装一个虚拟机，虚拟机中安装几台 Linux 。此时需要在 A 电脑中通过 ssh 访问 B 电脑虚拟机安装的 Linux 系统。

**前提条件：**
1、虚拟机中的 Linux 系统做了静态 IP 处理，防止每次开机导致 IP 变动
2、两台电脑在同一局域网内

![image-20221031113842368](https://cruder-figure-bed.oss-cn-beijing.aliyuncs.com/markdown/2022/10/31/11-38-42-695.png)





**方式：**
1、点击 `VMware` 的「编辑(e)」，选择「虚拟机网络编辑器」

2、选择 `VMnet8` ，在点击「NAT 设置」

- 选添加
- 主机端口：自定义命名，数字要大于 1024
- 虚拟机 IP 地址则是 Linux 虚拟机中设置好的静态 IP 地址（你想访问几台电脑，就设置多少个）
- 虚拟机端口（p）：如果是用于`ssh`则端口设置为`22`，如果是用做`Web`服务器，推荐设置成`80`

4、查看 B 电脑中的 IP，
5、在 A 电脑中使用专门的软件，或者使用`ssh` 命令链接 B 电脑，连接方式如下：

```sh
ssh -p 端口 username@ip 
# 比如：上文修改的端口号为1129，连接命令为（192.168.1.105是虚拟机宿主机的IP）
ssh -p 1129 root@192.168.1.105
```

端口：第三步设置的主机端口（通过端口区分不同的 Linux 虚拟机，如果想要链接多台的话，需要设置不同的端口）
username：虚拟机中的用户名
ip：B 主机的 IP

> 注意：保证虚拟机是开机状态，关闭防火墙（如果无法链接，可能是防火墙的事情，或者在电脑的出入站规则中设置 TCP 端口连接）

参考链接：
[一台电脑如何连接到另外一台电脑的虚拟机即里面安装的系统](https://blog.csdn.net/yangzaiqiu1986814/article/details/50788263)